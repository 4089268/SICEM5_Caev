@namespace Sicem_Blazor.Recaudacion.Views
@page "/RecaudacionAnalitico"
@using Syncfusion.Blazor.Grids
@using Syncfusion.Blazor.Charts
@using System.Threading.Tasks
@using Sicem_Blazor.Recaudacion.Models
@using Sicem_Blazor.Recaudacion.Data

<div class="layout-page">

    <div class="title-page">CONSULTA DE INGRESOS ANALITICO</div>

    <div class="border rounded bg-white px-2 d-flex align-items-center">
        <SeleccionarFecha ProcesarParam="@Procesar" />
    </div>

    <div class="border rounded bg-white d-flex align-items-center">
        <MatButton Class="mx-2" style="min-width: 130px;" Raised="true">Exportar Excel</MatButton>
    </div>

    <div class="border rounded bg-white d-flex align-items-center">
        <SfChart Title="" SubTitle="" Width="100%" Height="270">
            <ChartPrimaryXAxis ValueType="Syncfusion.Blazor.Charts.ValueType.Category"></ChartPrimaryXAxis>
            <ChartPrimaryYAxis Title="Analitico" Visible="false" LabelFormat="c2" />
            <ChartTooltipSettings Enable="true"></ChartTooltipSettings>
            <ChartLegendSettings Visible="true" Position="LegendPosition.Right"></ChartLegendSettings>
            <ChartZoomSettings EnableMouseWheelZooming="true" EnablePinchZooming="true" EnableSelectionZooming="true"></ChartZoomSettings>
            <ChartSeriesCollection>
                @for(int i = 0; i <= DatosAnalitico.Analitico_Mensual.Length - 1; i++)
                {
                    var ano = DatosAnalitico.Analitico_Mensual.OrderByDescending(item => item.Año).ToArray()[i].Año;
                    <ChartSeries XName="Descripcion" DashArray="5,1" DataSource="@itemsGrafica_analitico" YName="@($"Valor{i+1}")" Name="@(ano.ToString())" Type="ChartSeriesType.Line">
                        <ChartMarker Visible="true">
                            <ChartDataLabel Visible="true" />
                        </ChartMarker>
                    </ChartSeries>
                }
            </ChartSeriesCollection>
        </SfChart>
    </div>

</div>

<style>
    .layout-page
    {
        display: grid;
        grod-template-rows: 4rem 6rem 6rem calc(100% - 16.5rem);
        grod-template-columns: 1fr;
    }
</style>


@* ****** Dialogos y ventanas secundarias ****** *@
<BusyIndicator Busy="@busyDialog" ContentText="Cargando datos...." />